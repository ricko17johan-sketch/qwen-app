<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panduan Wudhu, Sholat & Dzikir - Cloud Sunnah</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a936f;
            --secondary-color: #88d498;
            --accent-color: #f3e9d2;
            --dark-color: #114b5f;
            --light-color: #f9f9f9;
            --text-color: #333;
            --gold-color: #d4af37;
            --font-size: 16px;
            --arabic-font-size: 20px;
            --transition: all 0.3s ease;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            /* Calendar Colors */
            --color-sunnah: #4CAF50; /* Hijau */
            --color-wajib: #F44336; /* Merah */
            --color-larangan: #795548; /* Cokelat */
            --color-normal: #2196F3; /* Biru untuk hari biasa */
            --color-today: #a0d6f5; /* Biru Muda untuk hari ini */
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f9f9f9 0%, #e6f5f5 100%);
            color: var(--text-color);
            line-height: 1.7;
            padding-bottom: 60px;
            transition: var(--transition);
            font-size: var(--font-size);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--dark-color) 100%);
            color: white;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .logo i {
            color: var(--accent-color);
            font-size: 1.8rem;
        }
        .logo h1 {
            font-size: 1.4rem;
        }
        .nav-container {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 14px;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            font-size: 0.9rem;
        }
        .nav-btn:hover,
        .nav-btn.active {
            background: white;
            color: var(--primary-color);
        }
        .settings-container {
            position: relative;
        }
        .settings-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .settings-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(30deg);
        }
        /* Settings Menu */
        .settings-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .settings-overlay.active {
            display: flex;
        }
        .settings-menu {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--box-shadow);
            position: relative;
        }
        .settings-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-color);
        }
        .settings-menu h3 {
            margin-bottom: 20px;
            color: var(--dark-color);
            text-align: center;
            font-size: 1.3rem;
        }
        .setting-item {
            margin-bottom: 20px;
        }
        .setting-item label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 1rem;
        }
        .description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 12px;
        }
        .font-size-control {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }
        .font-size-control button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }
        .font-size-control button:hover {
            background: var(--primary-color);
            color: white;
        }
        .font-size-control span {
            min-width: 40px;
            text-align: center;
            font-size: 1rem;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: var(--transition);
            border-radius: 34px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: var(--primary-color);
        }
        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
        /* Page Styles */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .hero {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--box-shadow);
        }
        .hero h2 {
            color: var(--dark-color);
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        .hero p {
            font-size: 1rem;
            max-width: 800px;
            margin: 0 auto 15px;
        }
        /* Steps Styles */
        .steps-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .step-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .step-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        .step-number {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 35px;
            height: 35px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        .step-card h3 {
            color: var(--dark-color);
            margin-bottom: 12px;
            font-size: 1.2rem;
        }
        .step-card p {
            margin-bottom: 12px;
            font-size: 0.95rem;
        }
        .step-details {
            background: var(--light-color);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 12px;
            display: none;
        }
        .step-card.active .step-details {
            display: block;
        }
        .arabic-text {
            font-size: var(--arabic-font-size);
            text-align: right;
            direction: rtl;
            margin: 12px 0;
            line-height: 2.5;
        }
        .latin-text {
            font-size: var(--font-size);
            font-style: italic;
            margin: 8px 0;
        }
        .translation {
            margin: 12px 0;
            font-style: italic;
            color: #666;
            font-size: 0.95rem;
        }
        .close-details {
            text-align: center;
            margin-top: 12px;
        }
        .close-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        .close-btn:hover {
            background: var(--dark-color);
        }
        /* Jadwal Sholat Styles */
        .prayer-times {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
            text-align: center;
        }
        .location-info {
            margin-bottom: 15px;
            font-weight: 500;
        }
        .location-info i {
            margin-right: 5px;
        }
        .prayer-times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .prayer-time-item {
            background: var(--accent-color);
            padding: 10px;
            border-radius: 8px;
        }
        .prayer-time-item .name {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        .prayer-time-item .time {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--dark-color);
        }
        .get-location-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            margin-top: 10px;
        }
        .get-location-btn:hover {
            background: var(--dark-color);
        }
        .get-location-btn:disabled {
             background: #cccccc;
             cursor: not-allowed;
        }
        .error-message {
            color: #ff6b6b;
            margin-top: 10px;
            font-weight: 500;
        }
        /* Footer Styles */
        footer {
            text-align: center;
            padding: 20px 0;
            background: var(--dark-color);
            color: white;
            margin-top: 40px;
        }
        /* Social Media */
        .social-media {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        .social-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .social-icon:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .facebook { background: #3b5998; }
        .twitter { background: #1da1f2; }
        .instagram { background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); }
        .tiktok { background: linear-gradient(45deg, #000000, #00f2ea, #ff0050); }

        /* Calendar Styles */
        .calendar-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .calendar-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--dark-color);
        }
        .calendar-nav {
            display: flex;
            gap: 10px;
        }
        .calendar-nav button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        .calendar-nav button:hover {
            background: var(--dark-color);
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        .calendar-day-header {
            text-align: center;
            font-weight: bold;
            padding: 10px 5px;
            background-color: var(--accent-color);
            border-radius: 5px;
        }
        .calendar-date {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }
        .calendar-date:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        .calendar-date.other-month {
            color: #ccc;
            cursor: default;
        }
        .calendar-date.today {
            background-color: var(--color-today);
            color: var(--dark-color);
            font-weight: bold;
            border: 2px solid var(--primary-color);
        }
        .calendar-date.sunnah {
            background-color: var(--color-sunnah);
            color: white;
        }
        .calendar-date.wajib {
            background-color: var(--color-wajib);
            color: white;
        }
        .calendar-date.larangan {
            background-color: var(--color-larangan);
            color: white;
        }
        .calendar-date .hijri-date {
            font-size: 0.7em;
            opacity: 0.8;
        }
        .calendar-date .gregorian-date {
            font-size: 1em;
        }
        /* Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .popup-overlay.active {
            display: flex;
        }
        .popup-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--box-shadow);
            position: relative;
        }
        .popup-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-color);
        }
        .popup-title {
            margin-bottom: 15px;
            color: var(--dark-color);
            text-align: center;
            font-size: 1.3rem;
        }
        .popup-info {
            margin-bottom: 15px;
        }
        .popup-info p {
            margin-bottom: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content { flex-direction: column; gap: 15px; }
            .nav-container { width: 100%; justify-content: center; }
            .hero h2 { font-size: 1.6rem; }
            .hero p { font-size: 0.95rem; }
            .steps-container { grid-template-columns: 1fr; }
            .prayer-times-grid { grid-template-columns: repeat(3, 1fr); }
            .calendar-grid { gap: 3px; }
            .calendar-date { padding: 3px; }
            .calendar-date .hijri-date { font-size: 0.6em; }
            .calendar-date .gregorian-date { font-size: 0.9em; }
        }
        @media (max-width: 480px) {
            .container { padding: 0 15px; }
            .hero { padding: 30px 15px; }
            .steps-container { gap: 15px; }
            .prayer-times-grid { grid-template-columns: repeat(2, 1fr); }
            .calendar-header { flex-direction: column; align-items: stretch; }
            .calendar-nav { justify-content: center; }
            .calendar-grid { gap: 2px; }
            .calendar-day-header { padding: 5px 2px; font-size: 0.8em; }
            .calendar-date { padding: 2px; }
            .calendar-date .hijri-date { font-size: 0.5em; }
            .calendar-date .gregorian-date { font-size: 0.8em; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-cloud-sun"></i>
                <h1>CLOUD SUNNAH</h1>
            </div>
            <div class="nav-container">
                <button class="nav-btn active" data-page="wudhu">Wudhu</button>
                <button class="nav-btn" data-page="sholat">Sholat</button>
                <button class="nav-btn" data-page="dzikir">Dzikir</button>
                <button class="nav-btn" data-page="jadwal">Jadwal</button>
                <button class="nav-btn" data-page="kalender">Kalender</button>
            </div>
            <div class="settings-container">
                <button class="settings-toggle" id="settingsToggle">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>
    </header>
    <div class="settings-overlay" id="settingsOverlay">
        <div class="settings-menu">
            <button class="settings-close" id="settingsClose">&times;</button>
            <h3>Pengaturan Tampilan</h3>
            <div class="setting-item">
                <label for="fontSize">Ukuran Teks (Latin & Arab)</label>
                <div class="description">Mengubah ukuran teks untuk seluruh konten</div>
                <div class="font-size-control">
                    <button id="decreaseFont">A-</button>
                    <span id="fontSizeValue">16</span>
                    <button id="increaseFont">A+</button>
                </div>
            </div>
            <div class="setting-item">
                <label for="arabicFontSize">Ukuran Teks Arab</label>
                <div class="description">Mengubah ukuran teks Arab khusus</div>
                <div class="font-size-control">
                    <button id="decreaseArabicFont">A-</button>
                    <span id="arabicFontSizeValue">20</span>
                    <button id="increaseArabicFont">A+</button>
                </div>
            </div>
            <div class="setting-item">
                <label for="latinToggle">Tampilkan Teks Latin</label>
                <div class="description">Menampilkan atau menyembunyikan teks latin</div>
                <label class="toggle-switch">
                    <input type="checkbox" id="latinToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>
    </div>
    <div class="container">
        <div id="wudhu-page" class="page active">
            <section class="hero">
                <h2>Tata Cara Wudhu Sesuai Sunnah</h2>
                <p>Lengkap dengan dalil dari Al-Qur'an dan Hadits yang Shahih</p>
            </section>
            <div class="steps-container">
                <div class="step-card" data-step="1">
                    <div class="step-number">1</div>
                    <h3>Niat di dalam Hati</h3>
                    <p>Niat adalah amalan hati, tidak untuk diucapkan. Niat berwudhu untuk menghilangkan hadats kecil demi melaksanakan sholat atau ibadah lainnya.</p>
                    <div class="step-details">
                        <div class="arabic-text">إِنَّمَا الأَعْمَالُ بِالنِّيَّاتِ</div>
                        <div class="latin-text">Innama al-a'malu binniyat</div>
                        <p class="translation">"Sesungguhnya setiap amalan tergantung pada niatnya." (HR. Bukhari no. 1 dan Muslim no. 1907)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="2">
                    <div class="step-number">2</div>
                    <h3>Mengucap "Bismillah"</h3>
                    <p>Sebelum memulai wudhu.</p>
                    <div class="step-details">
                        <div class="arabic-text">لاَ وُضُوءَ لِمَنْ لَمْ يَذْكُرِ اسْمَ اللَّهِ عَلَيْهِ</div>
                        <div class="latin-text">Laa wudhu-a liman lam yadzkuris mallahi 'alaih</div>
                        <p class="translation">"Tidak ada wudhu (yang sempurna) bagi yang tidak menyebut nama Allah." (HR. Tirmidzi no. 25, dishahihkan oleh Syaikh Al-Albani)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="3">
                    <div class="step-number">3</div>
                    <h3>Membasuh Kedua Telapak Tangan (3 kali)</h3>
                    <p>Mencuci kedua telapak tangan hingga pergelangan sebanyak tiga kali.</p>
                    <div class="step-details">
                        <p class="translation">Dalil: Dari hadits Utsman bin Affan, beliau meminta dibawakan air wudhu, lalu beliau "menuangkan air pada kedua telapak tangannya tiga kali, lalu beliau mencucinya." (HR. Bukhari no. 159 dan Muslim no. 226)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="4">
                    <div class="step-number">4</div>
                    <h3>Berkumur dan Memasukkan Air ke Hidung (3 kali)</h3>
                    <p>Mengambil air dengan satu cidukan telapak tangan kanan, sebagian untuk berkumur (madhmadhah) dan sebagian lagi untuk dihirup ke hidung (istinsyaq), lalu mengeluarkannya (istintsar). Dilakukan sebanyak tiga kali.</p>
                    <div class="step-details">
                        <p class="translation">Dalil: Dalam lanjutan hadits Utsman, "Kemudian beliau berkumur, memasukkan air ke hidung, dan mengeluarkannya." (HR. Bukhari no. 159 dan Muslim no. 226)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="5">
                    <div class="step-number">5</div>
                    <h3>Membasuh Seluruh Wajah (3 kali)</h3>
                    <p>Membasuh wajah secara merata, dari batas tumbuhnya rambut di dahi hingga ke bawah dagu, dan dari telinga kanan hingga telinga kiri. Bagi laki-laki, disunnahkan untuk menyela-nyela jenggot yang tebal.</p>
                    <div class="step-details">
                        <p class="translation">Dalil: Dalam lanjutan hadits Utsman, "Lalu beliau membasuh wajahnya tiga kali." (HR. Bukhari no. 159 dan Muslim no. 226)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="6">
                    <div class="step-number">6</div>
                    <h3>Membasuh Kedua Tangan Hingga Siku (3 kali)</h3>
                    <p>Membasuh tangan kanan terlebih dahulu sampai melewati siku, kemudian tangan kiri dengan cara yang sama. Masing-masing tiga kali.</p>
                    <div class="step-details">
                        <p class="translation">Dalil: Dalam lanjutan hadits Utsman, "Kemudian membasuh tangan kanannya sampai siku tiga kali, lalu tangan kirinya seperti itu juga." (HR. Bukhari no. 159 dan Muslim no. 226)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="7">
                    <div class="step-number">7</div>
                    <h3>Mengusap Seluruh Kepala dan Telinga (1 kali)</h3>
                    <p>Mengusap kepala cukup satu kali. Caranya adalah dengan membasahi kedua telapak tangan, lalu mengusapkannya dari depan kepala (tempat tumbuh rambut) ke arah tengkuk, lalu mengembalikannya lagi ke depan. Langsung dilanjutkan dengan membersihkan kedua telinga (bagian dalam dengan telunjuk, bagian luar dengan ibu jari) dengan sisa air yang ada di tangan.</p>
                    <div class="step-details">
                        <p class="translation">Dalil: Dalam lanjutan hadits Utsman, "Kemudian beliau mengusap kepalanya." (HR. Bukhari no. 159 dan Muslim no. 226). Dan dalam riwayat Abdullah bin Zaid, beliau "mengusap kepalanya dengan kedua tangannya, dari depan ke belakang dan dari belakang ke depan." (HR. Bukhari no. 185 dan Muslim no. 235)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="8">
                    <div class="step-number">8</div>
                    <h3>Mencuci Kedua Kaki Hingga Mata Kaki (3 kali)</h3>
                    <p>Mencuci kaki kanan terlebih dahulu sampai melewati kedua mata kaki, sambil menyela-nyela jari-jari kaki. Kemudian dilanjutkan dengan kaki kiri dengan cara yang sama. Masing-masing tiga kali.</p>
                    <div class="step-details">
                        <p class="translation">Dalil: Dalam lanjutan hadits Utsman, "Kemudian beliau membasuh kaki kanannya sampai kedua mata kaki tiga kali, kemudian kaki kirinya seperti itu juga." (HR. Bukhari no. 159 dan Muslim no. 226)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="9">
                    <div class="step-number">9</div>
                    <h3>Tertib (Berurutan)</h3>
                    <p>Melakukan semua rukun wudhu secara berurutan sesuai yang telah dijelaskan.</p>
                    <div class="step-details">
                        <p class="translation">Tidak ada dalil khusus karena ini adalah kesimpulan dari tata cara wudhu yang dicontohkan Nabi Muhammad ﷺ.</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="10">
                    <div class="step-number">10</div>
                    <h3>Doa Setelah Wudhu</h3>
                    <p>Setelah selesai, dianjurkan membaca doa:</p>
                    <div class="step-details">
                        <div class="arabic-text">أَشْهَدُ أَنْ لاَ إِلَهَ إِلاَّ اللَّهُ وَحْدَهُ لاَ شَرِيكَ لَهُ وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُولُهُ</div>
                        <div class="latin-text">Asyhadu an laa ilaaha illallah wahdahu laa syariika lah, wa asyhadu anna muhammadan 'abduhu wa rasuluh.</div>
                        <p class="translation">(Aku bersaksi bahwa tidak ada sesembahan yang berhak disembah selain Allah semata, tidak ada sekutu bagi-Nya. Dan aku bersaksi bahwa Muhammad adalah hamba dan utusan-Nya).</p>
                        <p class="translation">Dalil dan Faedahnya: Rasulullah ﷺ bersabda, "Tidaklah seorang di antara kalian berwudhu dan menyempurnakan wudhunya, kemudian mengucapkan (doa di atas), kecuali akan dibukakan untuknya delapan pintu surga, ia dapat masuk dari pintu mana saja yang ia kehendaki." (HR. Muslim no. 234)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sholat-page" class="page">
            <section class="hero">
                <h2>Tata Cara Sholat Sesuai Sunnah</h2>
                <p>Lengkap dengan dalil dari Al-Qur'an dan Hadits yang Shahih</p>
            </section>
            <div class="steps-container">
                <div class="step-card" data-step="1">
                    <div class="step-number">1</div>
                    <h3>Berdiri Menghadap Kiblat</h3>
                    <p>Berdiri tegak menghadap Ka'bah dengan niat di dalam hati untuk melaksanakan sholat.</p>
                    <div class="step-details"><div class="close-details"><button class="close-btn">Tutup</button></div></div>
                </div>
                <div class="step-card" data-step="2">
                    <div class="step-number">2</div>
                    <h3>Takbiratul Ihram</h3>
                    <p>Mengangkat kedua tangan sejajar dengan bahu atau telinga, sambil mengucapkan:</p>
                    <div class="step-details">
                        <div class="arabic-text">اللهُ أَكْبَرُ</div>
                        <div class="latin-text">Allahu Akbar</div>
                        <p class="translation">Pandangan mata ke tempat sujud. Setelah itu, meletakkan tangan kanan di atas punggung telapak tangan kiri, pergelangan tangan, atau lengan kiri di atas dada.</p>
                        <p class="translation">Dalil: Dari Wail bin Hujr, beliau melihat Nabi ﷺ "ketika memulai sholat, beliau bertakbir seraya mengangkat kedua tangannya." (HR. Muslim no. 401). Dan beliau "meletakkan tangan kanannya di atas tangan kirinya (di dada)." (HR. Ibnu Khuzaimah no. 479, dishahihkan Syaikh Al-Albani).</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="3">
                    <div class="step-number">3</div>
                    <h3>Membaca Doa Iftitah</h3>
                    <p>Membaca doa iftitah yang diajarkan Rasulullah ﷺ</p>
                    <div class="step-details">
                        <p class="translation">Pilihan 1:</p>
                        <div class="arabic-text">اللَّهُمَّ بَاعِدْ بَيْنِي وَبَيْنَ خَطَايَايَ كَمَا بَاعَدْتَ بَيْنَ الْمَشْرِقِ وَالْمَغْرِبِ، اللَّهُمَّ نَقِّنِي مِنَ الْخَطَايَا كَمَا يُنَقَّى الثَّوْبُ الأَبْيَضُ مِنَ الدَّنَسِ، اللَّهُمَّ اغْسِلْ خَطَايَايَ بِالْمَاءِ وَالثَّلْجِ وَالْبَرَدِ</div>
                        <div class="latin-text">Allahumma baa-id bainii wa baina khathaayaaya kamaa baa-adta bainal masyriqi wal maghrib, Allahumma naqqinii minal khathaayaa kamaa yunaqqas tsaubul abyadhu minad danasi, Allahummaghsil khathaayaaya bil maa-i wats tsalji wal barad.</div>
                        <p class="translation">(Ya Allah, jauhkanlah antara aku dan kesalahan-kesalahanku sebagaimana Engkau menjauhkan antara timur dan barat. Ya Allah, bersihkanlah aku dari kesalahan-kesalahanku sebagaimana pakaian putih dibersihkan dari kotoran. Ya Allah, cucilah kesalahan-kesalahanku dengan air, salju, dan embun.) (HR. Bukhari no. 744 dan Muslim no. 598)</p>
                        <p class="translation">Pilihan 2:</p>
                        <div class="arabic-text">سُبْحَانَكَ اللَّهُمَّ وَبِحَمْدِكَ، وَتَبَارَكَ اسْمُكَ، وَتَعَالَى جَدُّكَ، وَلاَ إِلَهَ غَيْرُكَ</div>
                        <div class="latin-text">Subhanakallahumma wa bihamdika, wa tabaarakasmuka, wa ta-aalaa jadduka, wa laa ilaaha ghairuk.</div>
                        <p class="translation">(Maha Suci Engkau, ya Allah, dan segala puji bagi-Mu, Maha Berkah nama-Mu, Maha Tinggi keagungan-Mu, dan tidak ada sesembahan yang berhak disembah selain Engkau.) (HR. Abu Dawud no. 776 dan At-Tirmidzi no. 242, dishahihkan oleh Syaikh Al-Albani)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="4">
                    <div class="step-number">4</div>
                    <h3>Membaca Ta'awudz dan Al-Fatihah</h3>
                    <p>Membaca A'udzu billahi minasy syaithaanir rajiim (Aku berlindung kepada Allah dari godaan setan yang terkutuk) secara lirih, lalu membaca surah Al-Fatihah ayat per ayat. Membaca Al-Fatihah adalah rukun sholat.</p>
                    <div class="step-details">
                        <div class="arabic-text">أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ الرَّجِيمِ</div>
                        <div class="latin-text">A-udzu billahi minasy syaithaanir rajiim</div>
                        <p class="translation">Dalil: Rasulullah ﷺ bersabda,</p>
                        <div class="arabic-text">لاَ صَلاَةَ لِمَنْ لَمْ يَقْرَأْ بِفَاتِحَةِ الْكِتَابِ</div>
                        <div class="latin-text">Laa shalata liman lam yaqra- bi-faatihatil-kitaab</div>
                        <p class="translation">"Tidak sah sholat seseorang yang tidak membaca Al-Fatihah." (HR. Bukhari no. 756 dan Muslim no. 394)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="5">
                    <div class="step-number">5</div>
                    <h3>Membaca Surat dari Al-Qur'an</h3>
                    <p>Setelah Al-Fatihah, membaca surat atau beberapa ayat dari Al-Qur'an yang mudah. Pada rakaat pertama biasanya lebih panjang dari rakaat kedua.</p>
                    <div class="step-details">
                        <p class="translation">Contoh: Surat Al-Ikhlas, Al-Falaq, An-Nas.</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="6">
                    <div class="step-number">6</div>
                    <h3>Ruku'</h3>
                    <p>Mengangkat kedua tangan seperti takbiratul ihram sambil mengucapkan Allahu Akbar, lalu membungkuk (ruku'). Punggung lurus, kepala sejajar dengan punggung, dan kedua telapak tangan memegang lutut. Saat ruku' (thuma-ninah/tenang), Anda bisa membaca salah satu dari beberapa bacaan berikut:</p>
                    <div class="step-details">
                        <p class="translation">Pilihan 1: <span class="arabic-text">سُبْحَانَ رَبِّيَ الْعَظِيمِ</span> (Subhaana Rabbiyal -Azhiim) - 3x</p>
                        <p class="translation">Pilihan 2: <span class="arabic-text">سُبْحَانَكَ اللَّهُمَّ رَبَّنَا وَبِحَمْدِكَ، اللَّهُمَّ اغْفِرْ لِي</span> (Subhanakallahumma rabbanaa wa bihamdika, Allahummaghfir lii.)</p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="7">
                    <div class="step-number">7</div>
                    <h3>I'tidal (Bangkit dari Ruku')</h3>
                    <p>Bangkit dari ruku' sambil mengangkat kedua tangan dan mengucapkan: <span class="arabic-text">سَمِعَ اللهُ لِمَنْ حَمِدَهُ</span></p>
                    <div class="step-details">
                        <p class="translation">Setelah berdiri tegak (thuma-ninah), baca: <span class="arabic-text">رَبَّنَا وَلَكَ الْحَمْدُ</span></p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="8">
                    <div class="step-number">8</div>
                    <h3>Sujud</h3>
                    <p>Turun untuk sujud sambil mengucapkan Allahu Akbar. Anggota badan yang menyentuh lantai ada 7: dahi (bersama hidung), kedua telapak tangan, kedua lutut, dan kedua ujung jari kaki. Saat sujud (thuma-ninah), baca:</p>
                    <div class="step-details">
                        <p class="translation">Pilihan 1: <span class="arabic-text">سُبْحَانَ رَبِّيَ الأَعْلَى</span> (Subhaana Rabbiyal A-laa) - 3x</p>
                        <p class="translation">Pilihan 2: <span class="arabic-text">سُبْحَانَكَ اللَّهُمَّ رَبَّنَا وَبِحَمْدِكَ، اللَّهُمَّ اغْفِرْ لِي</span></p>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="9">
                    <div class="step-number">9</div>
                    <h3>Duduk di Antara Dua Sujud</h3>
                    <p>Bangkit dari sujud sambil mengucapkan Allahu Akbar dan duduk iftirasy. Baca:</p>
                    <div class="step-details">
                        <div class="arabic-text">رَبِّ اغْفِرْ لِي، وَارْحَمْنِي، وَاجْبُرْنِي، وَارْفَعْنِي، وَارْزُقْنِي، وَاهْدِنِي، وَعَافِنِي</div>
                        <div class="latin-text">Rabbighfirlii, warhamnii, wajburnii, warfa-nii, warzuqnii, wahdinii, wa-aafinii.</div>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="10">
                    <div class="step-number">10</div>
                    <h3>Sujud Kedua</h3>
                    <p>Melakukan sujud kedua seperti sujud pertama, dengan bacaan yang sama.</p>
                    <div class="step-details"><div class="close-details"><button class="close-btn">Tutup</button></div></div>
                </div>
                <div class="step-card" data-step="11">
                    <div class="step-number">11</div>
                    <h3>Bangkit ke Rakaat Berikutnya</h3>
                    <p>Bangkit dari sujud kedua sambil mengucapkan Allahu Akbar untuk memulai rakaat selanjutnya, dan melakukan gerakan serta bacaan yang sama seperti rakaat pertama (dimulai dari Al-Fatihah).</p>
                    <div class="step-details"><div class="close-details"><button class="close-btn">Tutup</button></div></div>
                </div>
                <div class="step-card" data-step="12">
                    <div class="step-number">12</div>
                    <h3>Tasyahud Awal (Jika Sholat Lebih dari Dua Rakaat)</h3>
                    <p>Pada rakaat kedua, setelah sujud kedua, duduk tasyahud awal dengan posisi duduk iftirasy. Membaca:</p>
                    <div class="step-details">
                        <div class="arabic-text">التَّحِيَّاتُ لِلَّهِ وَالصَّلَوَاتُ وَالطَّيِّبَاتُ، السَّلاَمُ عَلَيْكَ أَيُّهَا النَّبِيُّ وَرَحْمَةُ اللَّهِ وَبَرَكَاتُهُ، السَّلاَمُ عَلَيْنَا وَعَلَى عِبَادِ اللَّهِ الصَّالِحِينَ، أَشْهَدُ أَنْ لاَ إِلَهَ إِلاَّ اللَّهُ وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُولُهُ</div>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="13">
                    <div class="step-number">13</div>
                    <h3>Berdiri Tegak Untuk Memulai Rakaat Ketiga</h3>
                    <p>Gerakan sholat dimulai dari membaca Surah Al-Fatihah (tanpa membaca surah atau ayat tambahan), dilanjutkan dengan rukuk, i-tidal, dan dua kali sujud.</p>
                     <div class="step-details">
                        <p class="translation">Catatan: Saat bangkit dari tasyahud awal menuju rakaat ketiga, dianjurkan mengangkat kedua tangan.</p>
                         <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="14">
                    <div class="step-number">14</div>
                    <h3>Tasyahud Akhir</h3>
                    <p>Pada rakaat terakhir, duduk tawarruk. Bacaannya sama dengan tasyahud awal, namun ditambah dengan shalawat Ibrahimiyyah dan doa perlindungan.</p>
                    <div class="step-details">
                        <p class="translation">Tambahan Shalawat Ibrahimiyyah:</p>
                        <div class="arabic-text">اللَّهُمَّ صَلِّ عَلَى مُحَمَّدٍ وَعَلَى آلِ مُحَمَّدٍ، كَمَا صَلَّيْتَ عَلَى إِبْرَاهِيمَ وَعَلَى آلِ إِبْرَاهِيمَ، إِنَّكَ حَمِيدٌ مَجِيدٌ...</div>
                        <p class="translation">Tambahan Doa:</p>
                        <div class="arabic-text">اَللّٰهُمَّ إِنِّيْ أَعُوْذُ بِكَ مِنْ عَذَابِ جَهَنَّمَ، وَمِنْ عَذَابِ الْقَبْرِ، وَمِنْ فِتْنَةِ الْمَحْيَا وَالْمَمَاتِ، وَمِنْ شَرِّ فِتْنَةِ الْمَسِيْحِ الدَّجَّالِ.</div>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
                <div class="step-card" data-step="15">
                    <div class="step-number">15</div>
                    <h3>Salam</h3>
                    <p>Menoleh ke kanan lalu ke kiri sambil mengucapkan:</p>
                    <div class="step-details">
                        <div class="arabic-text">السَّلاَمُ عَلَيْكُمْ وَرَحْمَةُ اللهِ</div>
                        <div class="latin-text">Assalaamu -alaikum wa rahmatullah</div>
                        <div class="close-details"><button class="close-btn">Tutup</button></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="dzikir-page" class="page">
            <section class="hero">
                <h2>Dzikir Setelah Sholat Sesuai Sunnah</h2>
                <p>Lengkap dengan dalil dari Al-Qur'an dan Hadits yang Shahih</p>
            </section>
            <div class="steps-container">
                <div class="step-card" data-step="1">
                    <div class="step-number">1</div>
                    <h3>Istighfar (3 kali) dan Doa Pujian</h3>
                    <p>Membaca: <span class="arabic-text">أَسْتَغْفِرُ اللهَ</span> (3x), lalu <span class="arabic-text">اللَّهُمَّ أَنْتَ السَّلاَمُ وَمِنْكَ السَّلاَمُ، تَبَارَكْتَ يَا ذَا الْجَلاَلِ وَالإِكْرَامِ</span></p>
                    <div class="step-details"><div class="close-details"><button class="close-btn">Tutup</button></div></div>
                </div>
                <div class="step-card" data-step="2">
                    <div class="step-number">2</div>
                    <h3>Tahlil</h3>
                    <p>Membaca: <span class="arabic-text">لاَ إِلَهَ إِلاَّ اللَّهُ وَحْدَهُ لاَ شَرِيكَ لَهُ...</span></p>
                    <div class="step-details"><div class="close-details"><button class="close-btn">Tutup</button></div></div>
                </div>
                <div class="step-card" data-step="3">
                    <div class="step-number">3</div>
                    <h3>Tasbih, Tahmid, Takbir (33x)</h3>
                    <p>Membaca: <span class="arabic-text">سُبْحَانَ اللهِ</span> (33x), <span class="arabic-text">الْحَمْدُ لِلَّهِ</span> (33x), <span class="arabic-text">اللهُ أَكْبَرُ</span> (33x). Lalu digenapkan 100 dengan Tahlil.</p>
                    <div class="step-details"><div class="close-details"><button class="close-btn">Tutup</button></div></div>
                </div>
                <div class="step-card" data-step="4">
                    <div class="step-number">4</div>
                    <h3>Ayat Kursi & Al-Mu'awwidzat</h3>
                    <p>Membaca Ayat Kursi (Al-Baqarah: 255), Al-Ikhlas, Al-Falaq, dan An-Nas (masing-masing 1x, khusus Subuh & Maghrib 3x).</p>
                    <div class="step-details"><div class="close-details"><button class="close-btn">Tutup</button></div></div>
                </div>
                 <div class="step-card" data-step="5">
                    <div class="step-number">5</div>
                    <h3>Doa Memohon Ilmu, Rezeki, dan Amal</h3>
                    <p>Khusus setelah sholat Subuh: <span class="arabic-text">اَللّٰهُمَّ إِنِّيْ أَسْأَلُكَ عِلْماً نَافِعاً، وَرِزْقاً طَيِّباً، وَعَمَلاً مُتَقَبَّلاً</span></p>
                    <div class="step-details"><div class="close-details"><button class="close-btn">Tutup</button></div></div>
                </div>
            </div>
        </div>
        <div id="jadwal-page" class="page">
            <section class="hero">
                <h2>Jadwal Sholat Hari Ini</h2>
                <p>Jadwal sholat berdasarkan lokasi Anda</p>
            </section>
            <div class="prayer-times">
                <div class="location-info" id="locationInfo">
                    <i class="fas fa-map-marker-alt"></i> Lokasi tidak ditemukan. Silakan aktifkan GPS.
                </div>
                <button class="get-location-btn" id="getLocationBtn">
                    <i class="fas fa-location-arrow"></i> Dapatkan Lokasi Saya
                </button>
                <div class="error-message" id="errorMessage"></div>
                <div class="prayer-times-grid" id="prayerTimesGrid">
                    <div class="prayer-time-item"><div class="name">Subuh</div><div class="time" id="subuh-time">--:--</div></div>
                    <div class="prayer-time-item"><div class="name">Dzuhur</div><div class="time" id="dzuhur-time">--:--</div></div>
                    <div class="prayer-time-item"><div class="name">Ashar</div><div class="time" id="ashar-time">--:--</div></div>
                    <div class="prayer-time-item"><div class="name">Maghrib</div><div class="time" id="maghrib-time">--:--</div></div>
                    <div class="prayer-time-item"><div class="name">Isya</div><div class="time" id="isya-time">--:--</div></div>
                </div>
            </div>
        </div>
        <div id="kalender-page" class="page">
            <section class="hero">
                <h2>Kalender Hijriah Interaktif</h2>
                <p>Kalender Hijriah yang tersinkronisasi dengan Kalender Masehi</p>
            </section>
            <div class="calendar-container">
                <div class="calendar-header">
                    <div class="calendar-title" id="calendarTitle">Memuat...</div>
                    <div class="calendar-nav">
                        <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                        <button id="today">Hari Ini</button>
                        <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendarGrid">
                    </div>
            </div>
        </div>
    </div>
    <div class="popup-overlay" id="calendarPopup">
        <div class="popup-content">
            <button class="popup-close" id="popupClose">&times;</button>
            <h3 class="popup-title" id="popupTitle">Tanggal</h3>
            <div class="popup-info" id="popupInfo">
                </div>
        </div>
    </div>
    <div class="social-media">
        <a href="https://www.instagram.com/cloudsunnah.ig?igsh=MXhqbGZwNHB6em5udw==" class="social-icon instagram" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://www.tiktok.com/@cloudsunnah?_t=ZS-8zAOfynDIcj&_r=1" class="social-icon tiktok" target="_blank"><i class="fab fa-tiktok"></i></a>
    </div>
    <footer>
        <div class="container">
            <p>&copy; 2025 CLOUD SUNNAH - Panduan Wudhu, Sholat & Dzikir Sesuai Sunnah Nabi Muhammad ﷺ</p>
        </div>
    </footer>
    <script>
        // Settings Toggle
        const settingsToggle = document.getElementById('settingsToggle');
        const settingsOverlay = document.getElementById('settingsOverlay');
        const settingsClose = document.getElementById('settingsClose');
        settingsToggle.addEventListener('click', () => settingsOverlay.classList.add('active'));
        settingsClose.addEventListener('click', () => settingsOverlay.classList.remove('active'));
        settingsOverlay.addEventListener('click', (e) => {
            if (e.target === settingsOverlay) settingsOverlay.classList.remove('active');
        });

        // Font Size Controls
        const increaseFont = document.getElementById('increaseFont');
        const decreaseFont = document.getElementById('decreaseFont');
        const fontSizeValue = document.getElementById('fontSizeValue');
        const increaseArabicFont = document.getElementById('increaseArabicFont');
        const decreaseArabicFont = document.getElementById('decreaseArabicFont');
        const arabicFontSizeValue = document.getElementById('arabicFontSizeValue');
        const latinToggle = document.getElementById('latinToggle');
        let currentFontSize = 16;
        let currentArabicFontSize = 20;

        increaseFont.addEventListener('click', () => { if (currentFontSize < 24) { currentFontSize += 2; updateFontSize(); } });
        decreaseFont.addEventListener('click', () => { if (currentFontSize > 12) { currentFontSize -= 2; updateFontSize(); } });
        increaseArabicFont.addEventListener('click', () => { if (currentArabicFontSize < 28) { currentArabicFontSize += 2; updateArabicFontSize(); } });
        decreaseArabicFont.addEventListener('click', () => { if (currentArabicFontSize > 16) { currentArabicFontSize -= 2; updateArabicFontSize(); } });
        
        latinToggle.addEventListener('change', () => {
            document.querySelectorAll('.latin-text').forEach(text => {
                text.style.display = latinToggle.checked ? 'block' : 'none';
            });
        });

        function updateFontSize() {
            document.documentElement.style.setProperty('--font-size', currentFontSize + 'px');
            fontSizeValue.textContent = currentFontSize;
        }
        function updateArabicFontSize() {
            document.documentElement.style.setProperty('--arabic-font-size', currentArabicFontSize + 'px');
            arabicFontSizeValue.textContent = currentArabicFontSize;
        }

        // Navigation
        const navButtons = document.querySelectorAll('.nav-btn');
        const pages = document.querySelectorAll('.page');
        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const pageId = button.getAttribute('data-page');
                navButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                pages.forEach(page => {
                    page.classList.remove('active');
                    if (page.id === pageId + '-page') page.classList.add('active');
                });
                if (pageId === 'kalender') {
                    initializeCalendar();
                }
            });
        });

        // Step Cards Toggle
        const stepCards = document.querySelectorAll('.step-card');
        stepCards.forEach(card => {
            card.addEventListener('click', (e) => {
                if (!e.target.classList.contains('close-btn')) card.classList.toggle('active');
            });
        });
        document.querySelectorAll('.close-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.target.closest('.step-card').classList.remove('active');
            });
        });

        // Jadwal Sholat
        const getLocationBtn = document.getElementById('getLocationBtn');
        const locationInfo = document.getElementById('locationInfo');
        const errorMessage = document.getElementById('errorMessage');
        
        getLocationBtn.addEventListener('click', () => {
            if (navigator.geolocation) {
                getLocationBtn.disabled = true;
                getLocationBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Mendapatkan lokasi...';
                errorMessage.textContent = '';
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                errorMessage.textContent = "Geolocation tidak didukung oleh browser ini.";
            }
        });

        function showPosition(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            locationInfo.innerHTML = `<i class="fas fa-map-marker-alt"></i> Koordinat: ${lat.toFixed(4)}, ${lon.toFixed(4)}`;
            fetchPrayerTimes(lat, lon);
        }

        function showError(error) {
            getLocationBtn.disabled = false;
            getLocationBtn.innerHTML = '<i class="fas fa-location-arrow"></i> Dapatkan Lokasi Saya';
            let msg = "Terjadi kesalahan.";
            if (error.code === 1) msg = "Izin akses lokasi ditolak.";
            if (error.code === 2) msg = "Informasi lokasi tidak tersedia.";
            if (error.code === 3) msg = "Permintaan lokasi melebihi batas waktu.";
            errorMessage.textContent = msg;
        }

        function fetchPrayerTimes(lat, lon) {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            const url = `https://api.aladhan.com/v1/calendar?latitude=${lat}&longitude=${lon}&method=2&month=${month}&year=${year}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.code === 200) {
                        const timings = data.data[day - 1].timings;
                        document.getElementById('subuh-time').textContent = timings.Fajr.substring(0, 5);
                        document.getElementById('dzuhur-time').textContent = timings.Dhuhr.substring(0, 5);
                        document.getElementById('ashar-time').textContent = timings.Asr.substring(0, 5);
                        document.getElementById('maghrib-time').textContent = timings.Maghrib.substring(0, 5);
                        document.getElementById('isya-time').textContent = timings.Isha.substring(0, 5);
                    } else {
                        errorMessage.textContent = "Gagal memuat jadwal sholat.";
                    }
                })
                .catch(() => errorMessage.textContent = "Terjadi kesalahan saat menghubungi server.")
                .finally(() => {
                    getLocationBtn.disabled = false;
                    getLocationBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh Lokasi & Jadwal';
                });
        }

        // --- Kalender Hijriah Interaktif ---
        // Variabel Global Kalender
        let currentHijriMonth;
        let currentHijriYear;

        const calendarTitle = document.getElementById('calendarTitle');
        const calendarGrid = document.getElementById('calendarGrid');
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');
        const todayBtn = document.getElementById('today');
        const calendarPopup = document.getElementById('calendarPopup');
        const popupClose = document.getElementById('popupClose');
        const popupTitle = document.getElementById('popupTitle');
        const popupInfo = document.getElementById('popupInfo');
        
        // --- START: LOGIKA KONVERSI TANGGAL AKURAT (KUWAITI ALGORITHM) ---
        function gmod(n, m) {
            return ((n % m) + m) % m;
        }

        function kuwaitiAlgorithm(gYear, gMonth, gDay) {
            let julianDay = Math.floor((1461 * (gYear + 4800 + Math.floor((gMonth - 14) / 12))) / 4) +
                Math.floor((367 * (gMonth - 2 - 12 * Math.floor((gMonth - 14) / 12))) / 12) -
                Math.floor((3 * Math.floor((gYear + 4900 + Math.floor((gMonth - 14) / 12)) / 100)) / 4) +
                gDay - 32075;
            
            let l = julianDay - 1948440 + 10632;
            let n = Math.floor((l - 1) / 10631);
            l = l - 10631 * n + 354;
            let j = (Math.floor((10985 - l) / 5316)) * (Math.floor((50 * l) / 17719)) + (Math.floor(l / 5670)) * (Math.floor((43 * l) / 15238));
            l = l - (Math.floor((30 - j) / 15)) * (Math.floor((17719 * j) / 50)) - (Math.floor(j / 16)) * (Math.floor((15238 * j) / 43)) + 29;
            let hMonth = Math.floor((24 * l) / 709);
            let hDay = l - Math.floor((709 * hMonth) / 24);
            let hYear = 30 * n + j - 30;
            return { year: hYear, month: hMonth, day: hDay };
        }
        
        function gregorianToHijri(gYear, gMonth, gDay) {
             return kuwaitiAlgorithm(gYear, gMonth, gDay);
        }

        function hijriToGregorian(hYear, hMonth, hDay) {
            let julianDay = hDay + Math.ceil(29.5 * (hMonth - 1)) + (hYear - 1) * 354 + Math.floor((3 + 11 * hYear) / 30) + 1948439 - 1;
            let l = julianDay + 68569;
            let n = Math.floor((4 * l) / 146097);
            l = l - Math.floor((146097 * n + 3) / 4);
            let i = Math.floor((4000 * (l + 1)) / 1461001);
            l = l - Math.floor((1461 * i) / 4) + 31;
            let j = Math.floor((80 * l) / 2447);
            let gDay = l - Math.floor((2447 * j) / 80);
            l = Math.floor(j / 11);
            let gMonth = j + 2 - 12 * l;
            let gYear = 100 * (n - 49) + i + l;
            return new Date(gYear, gMonth - 1, gDay);
        }

        function isHijriLeapYear(year) {
            return (14 + 11 * year) % 30 < 11;
        }

        function getDaysInHijriMonth(year, month) {
            if (month < 1 || month > 12) return 0;
            if (month % 2 === 1) return 30;
            if (month % 2 === 0 && month !== 12) return 29;
            return isHijriLeapYear(year) ? 30 : 29;
        }
        // --- END: LOGIKA KONVERSI TANGGAL ---

        prevMonthBtn.addEventListener('click', () => {
            currentHijriMonth--;
            if (currentHijriMonth < 1) {
                currentHijriMonth = 12;
                currentHijriYear--;
            }
            renderCalendar();
        });

        nextMonthBtn.addEventListener('click', () => {
            currentHijriMonth++;
            if (currentHijriMonth > 12) {
                currentHijriMonth = 1;
                currentHijriYear++;
            }
            renderCalendar();
        });
        
        todayBtn.addEventListener('click', () => {
            initializeCalendar();
        });

        popupClose.addEventListener('click', () => calendarPopup.classList.remove('active'));
        calendarPopup.addEventListener('click', (e) => {
            if (e.target === calendarPopup) calendarPopup.classList.remove('active');
        });

        function renderCalendar() {
            calendarTitle.textContent = `${getHijriMonthName(currentHijriMonth)} ${currentHijriYear} H`;
            calendarGrid.innerHTML = '';
            
            const dayHeaders = ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'];
            dayHeaders.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day-header';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });

            const firstDayOfMonth = hijriToGregorian(currentHijriYear, currentHijriMonth, 1);
            const firstDayOfWeek = firstDayOfMonth.getDay(); 
            const daysInMonth = getDaysInHijriMonth(currentHijriYear, currentHijriMonth);
            
            for (let i = 0; i < firstDayOfWeek; i++) {
                calendarGrid.appendChild(document.createElement('div'));
            }

            const todayGreg = new Date();
            todayGreg.setHours(0,0,0,0);

            for (let day = 1; day <= daysInMonth; day++) {
                const dateCell = document.createElement('div');
                dateCell.className = 'calendar-date';
                
                const gregorianDateObj = hijriToGregorian(currentHijriYear, currentHijriMonth, day);
                gregorianDateObj.setHours(0,0,0,0);
                
                if (gregorianDateObj.getTime() === todayGreg.getTime()) {
                    dateCell.classList.add('today');
                }

                const specialDate = getSpecialDateInfo(currentHijriMonth, day);
                if (specialDate) {
                    dateCell.classList.add(specialDate.type);
                }
                
                dateCell.innerHTML = `
                    <div class="gregorian-date">${gregorianDateObj.getDate()}</div>
                    <div class="hijri-date">${day}</div>
                `;
                dateCell.addEventListener('click', () => {
                    showDateInfo(currentHijriYear, currentHijriMonth, day, gregorianDateObj, specialDate);
                });
                calendarGrid.appendChild(dateCell);
            }
        }

        function showDateInfo(hijriYear, hijriMonth, hijriDay, gregorianDate, specialDate) {
            popupTitle.textContent = `${hijriDay} ${getHijriMonthName(hijriMonth)} ${hijriYear} H`;
            let infoHTML = `<p><strong>Tanggal Masehi:</strong> ${gregorianDate.toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</p>`;
            
            if (specialDate) {
                infoHTML += `<p><strong>${specialDate.name}</strong></p>`;
                if (specialDate.description) infoHTML += `<p>${specialDate.description}</p>`;
                if (specialDate.type === 'sunnah') infoHTML += `<p><span style="color: var(--color-sunnah);">●</span> Puasa Sunnah</p>`;
                else if (specialDate.type === 'wajib') infoHTML += `<p><span style="color: var(--color-wajib);">●</span> Puasa Wajib / Hari Raya</p>`;
                else if (specialDate.type === 'larangan') infoHTML += `<p><span style="color: var(--color-larangan);">●</span> Larangan Puasa</p>`;
            } else {
                infoHTML += `<p><span style="color: var(--color-normal);">●</span> Hari Biasa</p>`;
            }
            
            popupInfo.innerHTML = infoHTML;
            calendarPopup.classList.add('active');
        }

        function getHijriMonthName(month) {
            const months = ['', 'Muharram', 'Shafar', 'Rabi\'ul Awwal', 'Rabi\'ul Akhir', 'Jumadil Awwal', 'Jumadil Akhir', 'Rajab', 'Sya\'ban', 'Ramadhan', 'Syawal', 'Dzulqa\'dah', 'Dzulhijjah'];
            return months[month];
        }

        function getSpecialDateInfo(month, day) {
            if (day >= 13 && day <= 15) return { name: 'Ayyamul Bidh', description: 'Dianjurkan puasa pada hari-hari putih (tanggal 13, 14, 15).', type: 'sunnah' };
            if (month === 9) return { name: 'Bulan Ramadhan', description: 'Bulan diwajibkannya puasa.', type: 'wajib' };
            if (month === 10 && day === 1) return { name: 'Idul Fitri', description: 'Hari Raya Idul Fitri, haram berpuasa.', type: 'larangan' };
            if (month === 12 && (day >= 11 && day <= 13)) return { name: 'Hari Tasyrik', description: 'Haram berpuasa pada hari Tasyrik.', type: 'larangan' };
            if (month === 12 && day === 10) return { name: 'Idul Adha', description: 'Hari Raya Idul Adha, haram berpuasa.', type: 'larangan' };
            if (month === 12 && day === 9) return { name: 'Puasa Arafah', description: 'Dianjurkan puasa Arafah bagi yang tidak wukuf.', type: 'sunnah' };
            if (month === 1 && day === 9) return { name: 'Puasa Tasu\'a', description: 'Dianjurkan puasa Tasu\'a.', type: 'sunnah' };
            if (month === 1 && day === 10) return { name: 'Puasa Asyura', description: 'Dianjurkan puasa Asyura.', type: 'sunnah' };
            return null;
        }

        function initializeCalendar() {
             const today = new Date();
             const hijriDate = gregorianToHijri(today.getFullYear(), today.getMonth() + 1, today.getDate());
             currentHijriMonth = hijriDate.month;
             currentHijriYear = hijriDate.year;
             renderCalendar();
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            if (document.getElementById('kalender-page').classList.contains('active')) {
                initializeCalendar();
            }
        });
    </script>
</body>
</html>